{
    "contents" : "#install_github('quandl/R-package')\nlibrary(Quandl)\nlibrary(lubridate)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(ggmap)\n#read in data\npce <- read.csv(\"data/power-cost-equalization-pce-data.csv\")\nlatlon <- read.csv(\"latlon.csv\")\n\npce<- select(pce, community_names, plant__name, plant__utility__name, plant__akeps_region__name,\n       year, month, intertied, residential_rate, pce_rate, pro_rata_rate,\n       effective_rate, fuel_price, fuel_used_gal, fuel_cost, nonfuel_expenses,\n       diesel_efficiency, diesel_kwh_generated, peak_consumption_kw, \n       residential_kwh_sold, commercial_kwh_sold, community_kwh_sold, \n       government_kwh_sold, unbilled_kwh, residential_customers, commercial_customers, \n       community_customers, government_customers, unbilled_customers, \n       other_customers)\n\npce <- inner_join(latlon, pce, by = \"community_names\")\n\npce$Date <- as.Date(ymd(paste(pce$year, pce$month, \"01\")))\n#Remove empty factor level for region\npce <- filter(pce, plant__akeps_region__name != \"\")\n\nsummarized_pce <- pce %>% \n    group_by(Date) %>%\n    summarize(sum = mean(fuel_price, na.rm = T))\n\nggplot(summarized_pce, aes(x = Date, y = sum)) + geom_line()\n\n#Diesel Fuel Refiner Wholesale Price, Monthly\n#https://www.quandl.com/data/EIA/STEO_DSWHUUS_M-Diesel-Fuel-Refiner-Wholesale-Price-Monthly \n#Only 50 requests a day. \nwholesale_fuel <- Quandl(\"EIA/STEO_DSWHUUS_M\")\n#add a day. This offsets the time of the price by a day. \nwholesale_fuel$Date <- as.Date(wholesale_fuel$Date + days(1) )\n#convert to dolllars from cents\nwholesale_fuel$Value <- wholesale_fuel$Value / 100\n\ncombined_price <- inner_join(wholesale_fuel, pce, by = \"Date\")\n\n\n#Patterns of price inflation by geographic region\nggplot(data = combined_price, aes(x = fuel_price, y = Value, color = plant__akeps_region__name, alpha = 0.1)) + geom_point() + coord_fixed() + geom_smooth(method = \"lm\")\n#distribution of cost difference from wholesale and fuel_price to village\nggplot(data = combined_price, aes(x = fuel_price - Value, fill = plant__akeps_region__name)) + geom_histogram()\n#change in difference over time\nggplot(data = combined_price, aes(x = factor(Date), y = fuel_price - Value)) + geom_boxplot() + facet_wrap(~plant__akeps_region__name) + ggtitle(\"From 07/2001-06/2013\")\n#show \nmost_recent <- filter(combined_price, Date == \"2013-06-01\")\nggplot(data = most_recent, aes(x = lon, y = lat, label = community_names, color = fuel_price)) + geom_text() + scale_colour_gradientn(colours=rainbow(4))\nggplot(data = most_recent, aes(x = lon, y = lat, label = community_names, color = fuel_cost) ) + geom_text() + scale_colour_gradientn(colours=rainbow(4))\nggplot(data = most_recent, aes(x = lon, y = lat, label = community_names, color = residential_customers)) + geom_text() + scale_colour_gradientn(colours=rainbow(4))\nmean(most_recent$fuel_used_gal, na.rm = T)\n",
    "created" : 1433458503017.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3609442409",
    "id" : "5E14584C",
    "lastKnownWriteTime" : 1433551617,
    "path" : "C:/Users/chthompson/Desktop/PCE App/analysis.R",
    "project_path" : "analysis.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}